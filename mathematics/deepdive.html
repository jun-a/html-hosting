<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数学詳細図鑑 - Mathematics Deep Dive</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" integrity="sha384-n8MVd4RsNIU0tAv4ct0nTaAbDJwPJzDEaqSD1odI+WdtXRGWt2kTvGFasHpSy3SV" crossorigin="anonymous">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" integrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Helvetica', 'Arial', sans-serif;
        }
    </style>
</head>
<body>
    <div id="root"></div>
    
    <script type="text/babel">
        const { useState, useEffect, useRef } = React;
        
        // KaTeX rendering component
        const KatexFormula = ({ formula, className = "", displayMode = true }) => {
            const ref = useRef(null);
            const [fallback, setFallback] = useState(false);
            
            useEffect(() => {
                const renderFormula = () => {
                    if (ref.current && window.katex) {
                        try {
                            window.katex.render(formula, ref.current, {
                                throwOnError: false,
                                displayMode: displayMode
                            });
                        } catch (e) {
                            console.error("KaTeX rendering error:", e);
                            setFallback(true);
                        }
                    } else {
                        // KaTeX not loaded yet, retry after a short delay
                        const timeout = setTimeout(() => {
                            if (!window.katex) {
                                setFallback(true);
                            } else {
                                renderFormula();
                            }
                        }, 100);
                        return () => clearTimeout(timeout);
                    }
                };
                
                renderFormula();
            }, [formula, displayMode]);
            
            if (fallback) {
                return <div className={className}>{formula}</div>;
            }
            
            return <div ref={ref} className={className}></div>;
        };
        
        // Lucide React icons
        const Triangle = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
            </svg>
        );
        
        const GitGraph = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <circle cx="18" cy="18" r="3"></circle>
                <circle cx="6" cy="6" r="3"></circle>
                <path d="M13 6h3a2 2 0 0 1 2 2v7"></path>
                <line x1="6" y1="9" x2="6" y2="21"></line>
            </svg>
        );
        
        const Infinity = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M12 12c-2-2.67-4-4-6-4a4 4 0 1 0 0 8c2 0 4-1.33 6-4Zm0 0c2 2.67 4 4 6 4a4 4 0 0 0 0-8c-2 0-4 1.33-6 4Z"></path>
            </svg>
        );
        
        const LayoutGrid = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="3" width="7" height="7"></rect>
                <rect x="14" y="3" width="7" height="7"></rect>
                <rect x="14" y="14" width="7" height="7"></rect>
                <rect x="3" y="14" width="7" height="7"></rect>
            </svg>
        );
        
        const ArrowRight = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="5" y1="12" x2="19" y2="12"></line>
                <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
        );
        
        const ArrowLeft = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <line x1="19" y1="12" x2="5" y2="12"></line>
                <polyline points="12 19 5 12 12 5"></polyline>
            </svg>
        );
        
        const Home = ({ size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round">
                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
        );
        
        const ERAS = [
            { id: 'ancient', title: '古代：幾何と数', period: 'BC 3000 - AD 500', icon: <Triangle size={18} /> },
            { id: 'early_mod', title: '近世：微積分と解析', period: '1600 - 1800', icon: <GitGraph size={18} /> },
            { id: 'modern', title: '近代：無限と論理', period: '1800 - 1950', icon: <Infinity size={18} /> },
            { id: 'chaos', title: '現代：複雑系と難問', period: '1950 - Present', icon: <LayoutGrid size={18} /> },
        ];
        
        const MATHEMATICIANS = {
            ancient: [
                {
                    id: 'euclid',
                    name: 'ユークリッド（Euclid）',
                    title: '幾何学の父',
                    years: '紀元前325年頃 - 紀元前265年頃',
                    question: '幾何学の基礎は何か？',
                    answer: '5つの公理から論理的に証明を積み上げる体系だ。',
                    detail: 'ユークリッドは古代ギリシャのアレクサンドリアで活躍した数学者である。プトレマイオス1世の時代にアレクサンドリアで教鞭をとり、数学の歴史上最も影響力のある著作『原論』（Στοιχεῖα / Elements）を著した。この13巻からなる大著は、幾何学、数論、無理数論を体系的に論じたもので、2000年以上にわたり数学教育の標準テキストとして使われ続けた。ユークリッドの業績は単なる定理の集積ではなく、公理的方法という数学の根本的な方法論を確立した点にある。5つの公理（実際には公準5つと公理5つ）から出発し、論理的推論のみによって複雑な定理を証明していく手法は、現代数学の厳密性の原点となった。第5公準（平行線公準）は長年の論争を呼び、19世紀に非ユークリッド幾何学の発見へとつながった。ユークリッドの互除法は現代の暗号理論でも使用されている。',
                    achievements: '原論の執筆（幾何学の体系化）、公理的方法の確立、ユークリッドの互除法（最大公約数を求めるアルゴリズム）、無理数の存在証明',
                    modernSignificance: 'ユークリッド幾何学は測量、建築、コンピュータグラフィックスの基礎。公理的方法は現代数学の標準的アプローチ。非ユークリッド幾何学の発見は相対性理論につながった。',
                    controversies: '第5公準（平行線公準）の独立性については2000年以上議論された。19世紀にガウス、ボヤイ、ロバチェフスキーらが第5公準を否定した幾何学の一貫性を示した。',
                    connection: '公理的方法の確立。数学の厳密性の原点。ヒルベルトの公理主義につながる。',
                    applications: ['測量学', '建築学', 'コンピュータグラフィックス', '暗号理論（互除法）'],
                    diagramType: 'pythagorean',
                    diagramContent: null
                },
                {
                    id: 'pythagoras',
                    name: 'ピタゴラス（Pythagoras）',
                    title: '数の神秘家',
                    years: '紀元前570年頃 - 紀元前495年頃',
                    question: '世界の本質は何か？',
                    answer: '数だ。万物は数の調和で成り立つ。',
                    detail: 'ピタゴラスは古代ギリシャの哲学者・数学者で、サモス島に生まれ、後にクロトンにピタゴラス教団を創設した。「万物は数である」という思想のもと、数を神聖視し、宇宙の秩序は数学的比率で表現できると信じた。有名なピタゴラスの定理（a² + b² = c²）は、彼または彼の弟子たちによって証明されたとされる。無理数（√2）の発見は、「すべては整数比で表現できる」というピタゴラス学派の世界観を根底から揺るがした。音楽の和音が整数比（オクターブ2:1、完全5度3:2など）で表現できることを発見し、音楽理論の数学的基礎を築いた。ピタゴラス教団は数学的・哲学的研究と宗教的実践を結びつけた秘密結社的性格を持ち、発見を秘匿することで知られていた。',
                    achievements: 'ピタゴラスの定理（a² + b² = c²）、無理数√2の発見、音楽の数学的基礎（弦の長さと音高の関係）、数秘術の発展',
                    modernSignificance: 'ピタゴラスの定理は測量、GPS、コンピュータグラフィックスで広く使用。無理数の発見は実数論の発展につながった。音楽理論における発見は音響学、デジタル音楽の基礎。',
                    controversies: '無理数の発見を秘匿しようとした伝説。ピタゴラスの定理が本当に彼の発見かは不明（古代バビロニアでも知られていた）。',
                    connection: 'プラトンに影響。数学と哲学の融合。ユークリッドの原論につながる。',
                    applications: ['建築設計', '測量', 'GPS技術', '音響工学', 'コンピュータグラフィックス'],
                    diagramType: 'pytagoras',
                    diagramContent: null
                },
                {
                    id: 'archimedes',
                    name: 'アルキメデス（Archimedes）',
                    title: '古代最大の数学者',
                    years: '紀元前287年頃 - 紀元前212年',
                    question: '曲線で囲まれた図形の面積をどう求めるか？',
                    answer: '無限小の短冊に分割して和を取る。これが積分の原型だ。',
                    detail: 'アルキメデスはシチリア島のシラクサに生まれ、古代最大の数学者・物理学者・工学者である。円周率πを3.1408 < π < 3.1429と精密に近似し、球の体積公式（V = 4πr³/3）を発見した。取り尽くし法という手法は積分の原型であり、2000年後のニュートン・ライプニッツの微積分を予見していた。物理学では浮力の原理（アルキメデスの原理）、てこの原理を発見し、「支点を与えよ、地球をも動かそう」という名言を残した。アルキメデスの螺旋、アルキメデスのポンプなど工学的発明も多数。ローマ兵に「私の円を踏むな」と言って殺されたという逸話で知られる。',
                    achievements: '円周率の精密な近似、球の体積・表面積公式、浮力の原理、てこの原理、放物線弓形の面積計算、取り尽くし法（積分の原型）',
                    modernSignificance: '取り尽くし法は数値積分の原型。浮力の原理は造船工学・潜水艦設計の基礎。円周率の近似方法は数値計算の先駆け。',
                    controversies: '純粋数学を尊び、工学的応用を低く見ていたとされるが、実際には多数の兵器を設計した矛盾。太陽光で敵船を焼いたという伝説の真偽。',
                    connection: 'ユークリッドの幾何学を発展。ニュートン・ライプニッツの微積分に影響。ガウスに「アルキメデス、ニュートン、そして私」と称された。',
                    applications: ['造船工学', '流体力学', '数値解析', '機械設計'],
                    diagramType: 'archimedes_circle',
                    diagramContent: null
                },
                {
                    id: 'al_khwarizmi',
                    name: 'アル＝フワーリズミー（Al-Khwarizmi）',
                    title: '代数学の父',
                    years: '780年頃 - 850年頃',
                    question: '方程式を解く体系的な方法は何か？',
                    answer: 'アルジャブル（移項）とムカーバラ（約分）という操作だ。',
                    detail: 'ムハンマド・イブン・ムーサー・アル＝フワーリズミーは、イスラム黄金時代を代表するペルシャの数学者・天文学者である。バグダッドの知恵の館で活躍し、著書『アル＝ジャブルとムカーバラの計算法』が「代数学（Algebra）」の語源となった。1次・2次方程式の系統的な解法を示し、方程式を6つの標準形に分類した。インドの数学を学び、インド・アラビア数字（位取り記数法と0の概念）を西洋に紹介。彼の名前が「アルゴリズム（Algorithm）」の語源となったことは、計算手法が体系的だったことを示す。12世紀にラテン語に翻訳され、ヨーロッパ数学のルネサンスを促した。',
                    achievements: '代数学の体系化（アルジャブルとムカーバラ）、2次方程式の解法、インド・アラビア数字の普及、位取り記数法の紹介',
                    modernSignificance: '代数学は記号代数の基礎。位取り記数法の普及により複雑な計算が可能になり科学革命を支えた。アルゴリズムの概念はコンピュータサイエンスの基礎。',
                    controversies: '業績の多くはインドやギリシャ数学の整理・体系化であり、オリジナル性の評価は議論がある。しかし散在知識を統合した功績は大きい。',
                    connection: 'インド数学とギリシャ数学を統合。フィボナッチを通じてヨーロッパ数学に影響。デカルトの解析幾何学につながる。',
                    applications: ['方程式の解法', '会計・商業計算', 'コンピュータサイエンス（アルゴリズム）', '暗号理論'],
                    diagramType: 'algebra_equation',
                    diagramContent: null
                },
                {
                    id: 'fibonacci',
                    name: 'フィボナッチ（Fibonacci）',
                    title: 'アラビア数学のヨーロッパ伝播者',
                    years: '1170年頃 - 1250年頃',
                    question: 'ヨーロッパの計算法を改善するには？',
                    answer: 'アラビア数字と位取り記数法を導入することだ。',
                    detail: 'レオナルド・フィボナッチ（Leonardo Pisano）は、イタリアのピサで生まれた数学者である。父が商人で北アフリカで交易に従事していたため、若い頃からアラビア数学に触れる機会があった。1202年に『算盤の書』（Liber Abaci）を著し、アラビア数字と位取り記数法をヨーロッパに紹介。ローマ数字の煩雑さから解放され、複雑な商業計算が可能になった。ウサギの繁殖問題として知られるフィボナッチ数列（1, 1, 2, 3, 5, 8, 13, ...）を紹介。この数列は自然界（植物の葉の配列、ひまわりの種、巻き貝の螺旋）に現れ、黄金比φ ≈ 1.618に収束する。',
                    achievements: 'アラビア数字のヨーロッパ普及、フィボナッチ数列（F_n = F_{n-1} + F_{n-2}）、商業数学の発展、通貨換算・利息計算の手法',
                    modernSignificance: 'フィボナッチ数列は自然界の成長パターン、株価分析（フィボナッチ・リトレースメント）、アルゴリズム設計、黄金比による芸術・建築デザインに応用。',
                    controversies: 'フィボナッチ数列は古代インドで既に知られていたが、ヨーロッパで最初に体系的に紹介したため彼の名が付けられた。',
                    connection: 'アル＝フワーリズミーのアラビア数学をヨーロッパに伝達。ルネサンス期の商業数学・科学の発展に貢献。',
                    applications: ['金融工学（フィボナッチ・リトレースメント）', '植物学（葉序研究）', 'アルゴリズム設計', '建築・芸術デザイン'],
                    diagramType: 'fibonacci_spiral',
                    diagramContent: null
                }
            ],
            early_mod: [
                {
                    id: 'descartes',
                    name: 'ルネ・デカルト（Descartes）',
                    title: '解析幾何学の創始者',
                    years: '1596年 - 1650年',
                    question: '幾何と代数をどう統一するか？',
                    answer: '座標系を導入して、図形を方程式で表現する。',
                    detail: 'ルネ・デカルトはフランスの哲学者・数学者で、「我思う、ゆえに我あり（Cogito, ergo sum）」で知られる。数学では、デカルト座標系（直交座標系）を発明し、幾何学と代数学を統合した解析幾何学を創始。図形を方程式で表現でき、逆に方程式を図形として視覚化できるようになった（円：x² + y² = r²、直線：y = mx + b）。『方法序説』の付録『幾何学』で解析幾何学の基礎を築いた。数学記号においても、未知数をx, y, z、係数をa, b, cで表す現代的記法を確立。累乗をx³のように表す記法も導入。この統合は数学の表現力を飛躍的に高め、ニュートンとライプニッツの微積分を準備した。',
                    achievements: 'デカルト座標系の発明、解析幾何学の確立、数学記号の標準化（x, y, z; a, b, c; x^n表記）、2次曲線の統一的扱い',
                    modernSignificance: 'デカルト座標系は現代数学・物理・工学の基礎。GPS、ロボット工学、CAD、3Dモデリング、仮想現実、すべて座標系に依存。',
                    controversies: '解析幾何学の発見はフェルマーも独立に行っており優先権に議論。フェルマーが先だがデカルトが体系的に出版。',
                    connection: 'フェルマーと独立に解析幾何学を発展。ニュートン・ライプニッツの微積分の準備。オイラー、ラグランジュに影響。',
                    applications: ['コンピュータグラフィックス', 'GPS・ナビゲーション', 'ロボット工学', 'CAD設計', 'ゲーム開発'],
                    diagramType: 'cartesian_plane',
                    diagramContent: null
                },
                {
                    id: 'fermat',
                    name: 'ピエール・ド・フェルマー（Fermat）',
                    title: '近代整数論の父',
                    years: '1607年 - 1665年',
                    question: '整数の性質を支配する深遠な法則とは？',
                    answer: 'フェルマーの小定理、そしてフェルマーの最終定理だ。',
                    detail: 'ピエール・ド・フェルマーはフランスの法律家で、数学は余暇の趣味だったが、整数論、解析幾何学、確率論、微積分の前駆的研究など重要な貢献を多数残した。フェルマーの小定理（a^(p-1) ≡ 1 mod p、pは素数）は現代暗号理論（RSA）の基礎。フェルマーの最終定理（x^n + y^n = z^n はn≥3で整数解なし）は、ディオファントスの『算術』の余白に「私は真に驚くべき証明を見つけたが、余白が狭すぎて書けない」とメモされ、358年間未解決のまま残り、最終的に1995年にワイルズが証明。デカルトと独立に解析幾何学の基礎を築き、パスカルと確率論の基礎も築いた。',
                    achievements: 'フェルマーの最終定理、フェルマーの小定理（a^(p-1) ≡ 1 mod p）、2平方和定理、確率論の基礎（パスカルと）',
                    modernSignificance: 'フェルマーの小定理はRSA暗号の数学的基礎。インターネットセキュリティ、電子商取引、デジタル署名を支える。',
                    controversies: 'フェルマー自身が最終定理の証明を持っていたかは疑わしい。現代の証明は極めて高度な20世紀数学を使用し、フェルマーの時代では不可能だった。',
                    connection: 'ディオファントスの整数論を発展。オイラー、ガウスの整数論に影響。ワイルズによる最終定理の証明につながる。',
                    applications: ['暗号理論（RSA暗号）', 'デジタル署名', 'ブロックチェーン', '情報セキュリティ'],
                    diagramType: 'fermat_theorem',
                    diagramContent: null
                },
                {
                    id: 'pascal',
                    name: 'ブレーズ・パスカル（Pascal）',
                    title: '確率論の創始者',
                    years: '1623年 - 1662年',
                    question: '偶然の出来事を数学的に扱えるか？',
                    answer: '期待値という概念で、不確実性を数値化できる。',
                    detail: 'ブレーズ・パスカルはフランスの数学者・物理学者・哲学者・神学者。幼少期から数学の天才として知られ、16歳で円錐曲線論を発表。フェルマーとの往復書簡で確率論の基礎を築き、賭博の公平な配分問題を解決（期待値の概念の起源）。パスカルの三角形（二項係数の配列）を研究し組合せ論を発展。歯車式計算機「パスカリーヌ」を発明し父の税務計算を助けた。物理学では大気圧に関するパスカルの原理を発見（密閉容器内の流体の圧力はすべての方向に等しく伝わる）。後年は宗教的瞑想に専念し『パンセ』を著した。',
                    achievements: '確率論の創始（期待値の概念）、パスカルの三角形（二項係数）、パスカルの原理（流体力学）、機械式計算機の発明',
                    modernSignificance: '確率論は統計学、金融工学、機械学習、量子力学の根幹。期待値は意思決定理論、ゲーム理論、経済学で中心的役割。パスカルの原理は油圧機器の基礎。',
                    controversies: '確率論の創始はフェルマーとパスカルの協力によるもので、どちらが主導的かは議論がある。両者の協力が鍵だった。',
                    connection: 'フェルマーと協力して確率論を創始。ライプニッツの組合せ論に影響。ベルヌーイ家による確率論の発展につながる。',
                    applications: ['保険数理', '金融工学', '統計学', '機械学習', '油圧機器'],
                    diagramType: 'pascal_triangle',
                    diagramContent: null
                },
                {
                    id: 'newton_leibniz',
                    name: 'ニュートン & ライプニッツ',
                    title: '微積分の創始者',
                    question: '変化をどう数学的に捉えるか？',
                    answer: '微分と積分だ。瞬間の変化率と累積を計算できる。',
                    detail: 'アイザック・ニュートンとゴットフリート・ライプニッツは、独立に微積分を発明した。ニュートンは1666年頃に「流率法（method of fluxions）」として微積分の基本的アイデアを得たが、出版は1687年の『プリンキピア（自然哲学の数学的諸原理）』まで遅れた。ライプニッツは1675年頃に独立に微積分を発展させ、1684年に最初の論文を発表した。両者の間で激しい優先権争いが生じ、イギリスとヨーロッパ大陸の数学界の対立を招いた。ニュートンは王立協会会長として調査委員会を組織し自分に有利な結論を出させたが、後に批判された。現代では両者とも独立の発見者と認められている。ニュートンは物理学的応用（運動法則、万有引力の法則）に重点を置き、物体の運動や惑星の軌道を計算した。ライプニッツは記号法と形式的な理論構築に優れていた。実際、現代使われている dy/dx、∫ などの記号はライプニッツに由来する。微積分は科学革命の数学的基礎となり、物理学、工学、経済学など、あらゆる定量的科学の発展を可能にした。変化率（速度、加速度）、最適化（最大値・最小値）、累積（面積、体積）を扱う強力な道具として、現代科学技術を支えている。',
                    connection: '解析学の基礎。科学革命を数学的に支えた。',
                    diagramType: 'calculus',
                    diagramContent: null
                },
                {
                    id: 'euler',
                    name: 'レオンハルト・オイラー',
                    title: '史上最も多作の数学者',
                    question: '美しい数式とは何か？',
                    answer: 'e^(iπ) + 1 = 0だ。5つの重要な定数が一つに。',
                    detail: 'レオンハルト・オイラーはスイス生まれの数学者・物理学者で、史上最も多作な数学者として知られる。生涯で800以上の論文と著書を執筆し、死後も未発表の論文が何十年も出版され続けた。解析学、数論、グラフ理論、トポロジー、力学、光学など、ほぼすべての数学・物理学分野に貢献した。オイラーの公式 e^(ix) = cos(x) + i·sin(x)（x = π とすると e^(iπ) + 1 = 0）は、指数関数と三角関数を結びつける美しい公式で、数学で最も美しい式の一つとされる。ケーニヒスベルクの橋問題（7つの橋を一筆書きできるか？）を解き、グラフ理論とトポロジーの起源となった。多面体定理（V - E + F = 2、V=頂点数、E=辺数、F=面数）はトポロジーの先駆的業績。ζ関数ζ(s) = Σ 1/n^s の研究を開始し、素数分布の研究の基礎を築いた（後にリーマンが発展させリーマン予想へ）。数学記号においても、f(x)、e（自然対数の底）、i（虚数単位）、Σ（和の記号）、π などの現代的記法を普及させた。30歳で右目を失明し、60代で完全に失明したが、驚異的な記憶力と暗算能力で研究を続けた。オイラー・ラグランジュ方程式、オイラーの定数γ、オイラーの定理など、無数の概念に彼の名が冠されている。',
                    connection: '現代数学の多くの分野の基礎を築いた。',
                    diagramType: 'euler_identity',
                    diagramContent: null
                }
            ],
            modern: [
                {
                    id: 'cantor',
                    name: 'ゲオルク・カントール',
                    title: '無限の理論家',
                    question: '無限に大小はあるか？',
                    answer: 'ある。自然数の無限より実数の無限の方が「大きい」。',
                    detail: 'ゲオルク・カントールはロシア生まれのドイツの数学者で、集合論を創始し、無限の数学的理論を確立した。彼の最も革命的な発見は、無限にも大小があるという事実である。自然数全体の集合と実数全体の集合は、どちらも無限であるが、後者の方が「大きい」無限である（非可算無限）。この証明のために対角線論法という天才的な手法を開発した。任意の自然数から実数への列挙を仮定し、その列挙に含まれない実数を対角線的に構成することで、実数が可算でないことを証明した（|ℕ| < |ℝ|）。カントールは無限集合の濃度（基数）の理論を構築し、ℵ₀（アレフゼロ、可算無限）、ℵ₁、ℵ₂、...という無限の階層を定義した。連続体仮説（実数の濃度は ℵ₁ に等しいか？すなわち 2^ℵ₀ = ℵ₁ か？）を提唱したが、自ら証明できず、この問題に悩んだ。後にゲーデル（1938年）とコーエン（1963年）により、ZFC公理系からは証明も反証もできないことが示された（独立命題）。カントールの理論は当初、多くの数学者（特にクロネッカー）から激しく批判され、「病理的」「直観に反する」として拒絶された。クロネッカーは「神は整数を作ったが、他はすべて人間の仕事だ」として無限集合論を否定。カントールは論争と精神疾患に苦しみ、何度も入院した。しかし死後、集合論は現代数学の基礎言語として確立され、すべての数学的対象は集合として定式化されるようになった。',
                    connection: '現代数学の基礎。ゲーデルに影響。',
                    diagramType: 'infinity_levels',
                    diagramContent: null
                },
                {
                    id: 'godel',
                    name: 'クルト・ゲーデル',
                    title: '不完全性定理の証明者',
                    question: '数学はすべて証明できるか？',
                    answer: 'いいえ。十分に強い体系には必ず証明不可能な真の命題がある。',
                    detail: 'クルト・ゲーデルはオーストリア生まれの論理学者・数学者で、20世紀論理学最大の業績である不完全性定理を証明した。1931年、25歳のときに発表したこの定理は、数学の基礎に関するヒルベルトの夢（数学の完全性と無矛盾性の証明可能性）を打ち砕いた。第1不完全性定理は、ペアノ算術を含む無矛盾な形式体系には、真であるが証明不可能な命題が存在することを示した。つまり、数学は完全ではなく、真だが証明できない命題が必ず存在する。第2不完全性定理は、そのような体系は自己の無矛盾性を証明できないことを示した。証明には「ゲーデル数」という巧妙な手法を用い、数学的命題を自然数にコード化し、「この命題は証明できない」という自己言及的命題を構成した。これはエピメニデスの嘘つきのパラドックス（「この文は嘘である」）の数学版である。不完全性定理は、数学には本質的な限界があることを示し、完全で無矛盾な数学体系を構築するというヒルベルトの形式主義プログラムの実現不可能性を明らかにした。しかし、この「失敗」は数学基礎論に革命をもたらし、数理論理学、計算理論、人工知能の哲学に深い影響を与えた。晩年はプリンストン高等研究所でアインシュタインと親交を結び、一般相対性理論の解（ゲーデル解、回転宇宙モデル）を発見した。妄想症（食事に毒が盛られているという妄想）に苦しみ、餓死した。',
                    connection: '数理論理学の金字塔。計算理論に影響。',
                    diagramType: 'incompleteness',
                    diagramContent: null
                },
                {
                    id: 'gauss',
                    name: 'カール・フリードリヒ・ガウス（Gauss）',
                    title: '数学の王',
                    years: '1777年 - 1855年',
                    question: '数論の最も基本的な法則は何か？',
                    answer: '平方剰余の相互法則だ。素数間の深遠な対称性を明らかにする。',
                    detail: 'ガウスはドイツの数学者で「数学の王」と称される。10歳で1から100までの和を瞬時に計算（等差数列の和の公式を独自発見）。19歳で正17角形の作図可能性を証明し数学者を志す。1801年の『整数論研究』で近代整数論を確立。平方剰余の相互法則、最小二乗法、正規分布（ガウス分布）、複素平面、非ユークリッド幾何学への洞察など、驚異的な業績。小惑星ケレスの軌道計算で天文学にも貢献。完璧主義者で、十分に洗練された結果しか発表しなかった。',
                    achievements: '平方剰余の相互法則、正17角形の作図可能性、最小二乗法、正規分布、複素平面（ガウス平面）、代数学の基本定理の証明',
                    modernSignificance: '正規分布は統計学・機械学習の基礎。最小二乗法は回帰分析に不可欠。平方剰余の相互法則は暗号理論で重要。ガウス平面は複素解析・量子力学の基礎。',
                    controversies: '非ユークリッド幾何学を発見したが論争を恐れて公表せず。最小二乗法の優先権でルジャンドルと争った。',
                    connection: 'オイラー・ラグランジュの業績を継承。リーマン、デデキント、クロネッカーに影響。代数的整数論の基礎を築いた。',
                    applications: ['統計解析', '機械学習', '暗号理論', 'GPS・測量'],
                    diagramType: 'gaussian_distribution',
                    diagramContent: null
                },
                {
                    id: 'riemann',
                    name: 'ベルンハルト・リーマン（Riemann）',
                    title: 'リーマン幾何学の創始者',
                    years: '1826年 - 1866年',
                    question: '曲がった空間の幾何学をどう定式化するか？',
                    answer: '計量テンソルで空間の曲率を記述する。これがリーマン幾何学だ。',
                    detail: 'リーマンはドイツの数学者で、わずか39年の短い生涯ながら数学に革命をもたらした。ガウスの弟子として、1854年の教授資格請求講演で n次元の曲がった空間を扱うリーマン幾何学を提唱。これは後にアインシュタインの一般相対性理論の数学的基礎となった。ζ関数の複素解析的性質を研究し、素数分布に関するリーマン予想を提出（現代数学最大の未解決問題）。リーマン面、リーマン積分など、多くの基礎概念を導入した。',
                    achievements: 'リーマン幾何学、リーマン予想、リーマン面、リーマン積分、非ユークリッド幾何学の発展',
                    modernSignificance: 'リーマン幾何学は一般相対性理論でGPS・宇宙論に不可欠。リーマン予想は暗号理論・量子カオスと関連。リーマン面は弦理論の基礎。',
                    controversies: '厳密な証明なしに深い洞察を示すことが多く、後の数学者が厳密化する作業が必要だった。',
                    connection: 'ガウスの弟子。ヒルベルト、アインシュタインに影響。現代微分幾何学・理論物理学の基礎。',
                    applications: ['一般相対性理論', 'GPS技術', '宇宙論', '弦理論'],
                    diagramType: 'riemann_surface',
                    diagramContent: null
                },
                {
                    id: 'turing',
                    name: 'アラン・チューリング（Turing）',
                    title: '計算機科学の父',
                    years: '1912年 - 1954年',
                    question: '計算とは何か？計算できないものはあるか？',
                    answer: 'チューリングマシンで計算を定義でき、停止性問題は計算不可能だ。',
                    detail: 'チューリングはイギリスの数学者・計算機科学者で、「計算機科学の父」と呼ばれる。1936年にチューリングマシンという抽象的計算モデルを提案し、計算可能性理論を確立。停止性問題が決定不能であることを証明し、計算の限界を明らかにした。第二次大戦中、エニグマ暗号を解読し連合国の勝利に貢献。戦後は電子計算機の設計に携わり、チューリングテスト（機械が知的かを判定する基準）を提案。同性愛の罪で有罪判決、化学的去勢を強いられ、41歳で自殺。2013年に恩赦。',
                    achievements: 'チューリングマシン、停止性問題の決定不能性、エニグマ暗号解読、チューリングテスト、計算可能性理論',
                    modernSignificance: 'チューリングマシンは計算理論・アルゴリズム解析の基礎。P vs NP問題などの計算複雑性理論はチューリングマシンに基づく。チューリングテストはAI評価の指針。',
                    controversies: '同性愛での有罪判決と化学的去勢は現代では人権侵害として批判。死因は自殺とされるが事故説もある。',
                    connection: 'ゲーデルの不完全性定理に触発。シャノン、フォン・ノイマンと交流。現代計算機科学・AI研究の源流。',
                    applications: ['計算理論', 'プログラミング言語', '暗号理論', '人工知能'],
                    diagramType: 'turing_machine',
                    diagramContent: null
                },
                {
                    id: 'hilbert',
                    name: 'ダフィット・ヒルベルト（Hilbert）',
                    title: '20世紀数学の指導者',
                    years: '1862年 - 1943年',
                    question: '20世紀の数学はどこへ向かうべきか？',
                    answer: '23の重要問題が道しるべとなる。',
                    detail: 'ダフィット・ヒルベルトはドイツの数学者で、20世紀初頭の数学界を牽引した。1900年のパリ国際数学者会議で「ヒルベルトの23の問題」を提示し、20世紀数学の方向性を示した（リーマン予想、連続体仮説、ゴールドバッハ予想など）。『幾何学の基礎』でユークリッド幾何学を現代的に公理化。ヒルベルト空間（完備な内積空間）という無限次元ベクトル空間の概念を導入し、これは量子力学の数学的基礎となった。形式主義の立場から数学の完全性と無矛盾性を証明しようとしたが（ヒルベルト・プログラム）、ゲーデルの不完全性定理により不可能と示された。しかしこの試みは数理論理学の大きな発展を促した。',
                    achievements: 'ヒルベルトの23の問題、ヒルベルト空間、幾何学の公理化、ヒルベルト・プログラム（数学の基礎論）、不変式論',
                    modernSignificance: 'ヒルベルト空間は量子力学、信号処理、関数解析の基礎。量子状態、フーリエ変換、機械学習の理論的基盤。23の問題は現代でも研究の指針。',
                    controversies: 'ヒルベルト・プログラムはゲーデルにより不可能と示されたが、これは失敗ではなく数学の限界を明らかにする重要な結果をもたらした。',
                    connection: 'ガウス、リーマンの伝統を継承。フォン・ノイマン、ゲーデル、ヴァイルに影響。現代数学の形式主義の源流。',
                    applications: ['量子力学', '信号処理', 'フーリエ解析', '機械学習'],
                    diagramType: 'hilbert_space',
                    diagramContent: null
                },
                {
                    id: 'ramanujan',
                    name: 'シュリニヴァーサ・ラマヌジャン（Ramanujan）',
                    title: '直観的天才',
                    years: '1887年 - 1920年',
                    question: '数の間にどんな驚くべき関係が隠されているか？',
                    answer: '無限級数と連分数に、想像を超える美しいパターンが存在する。',
                    detail: 'シュリニヴァーサ・ラマヌジャンはインドの数学者で、ほぼ独学で驚異的な数学的直観を発達させた。貧困の中、教科書なしに数千の公式を発見。1913年、ケンブリッジ大学のハーディに手紙を送り、その内容に驚嘆したハーディはラマヌジャンをイギリスに招いた。ハーディとの共同研究で、分割数、モジュラー形式、テータ関数、無限級数など驚くべき公式を多数発表。彼の公式は証明なしに直観的に得られ、後の数学者が厳密化に何十年もかかった。πの計算のための驚異的な無限級数（毎項で8桁の精度）を発見。病弱で32歳の若さで死去したが、残したノートには何千もの未証明公式が記され、現代でも研究が続いている。',
                    achievements: 'ラマヌジャンのτ関数、分割数の公式、πの高速計算公式、モジュラー形式の研究、無限連分数',
                    modernSignificance: 'ラマヌジャンの公式は物理学（弦理論、ブラックホールエントロピー）、暗号理論、高速計算で応用。πの計算では最も効率的な方法の一つ。',
                    controversies: 'ラマヌジャンの方法は厳密でなく直観に依存。しかし彼の直観は驚くほど正確で、後の厳密化で正しいと証明された。思考過程は謎のまま。',
                    connection: 'ハーディとの協力。現代整数論、モジュラー形式論、フェルマーの最終定理の証明につながる。',
                    applications: ['πの高速計算', '弦理論', 'ブラックホール物理学', '暗号理論'],
                    diagramType: 'ramanujan_pi',
                    diagramContent: null
                },
                {
                    id: 'neumann',
                    name: 'ジョン・フォン・ノイマン（von Neumann）',
                    title: '20世紀のダ・ヴィンチ',
                    years: '1903年 - 1957年',
                    question: '計算機とゲーム理論で世界をどう変えるか？',
                    answer: 'ノイマン型アーキテクチャとミニマックス定理だ。',
                    detail: 'ジョン・フォン・ノイマンはハンガリー生まれの数学者・物理学者・計算機科学者で、20世紀最も多才な科学者の一人。量子力学の数学的基礎（ヒルベルト空間上の作用素理論）、ゲーム理論（モルゲンシュテルンとの共著『ゲームと経済行動の理論』、ミニマックス定理）、計算機科学（ノイマン型アーキテクチャ＝プログラム内蔵方式、ENIAC開発参加）、連続体力学、核物理学、数理経済学など、あらゆる分野に貢献。ヒルベルト空間論で量子力学を厳密化し、測定問題や不確定性原理を数学的に扱った。プログラム内蔵方式の提案は現代のほぼすべてのコンピュータの基礎となっている。',
                    achievements: 'ゲーム理論の創始（ミニマックス定理）、ノイマン型アーキテクチャ（プログラム内蔵方式）、量子力学の数学的定式化、セルオートマトン理論',
                    modernSignificance: 'ノイマン型アーキテクチャは現代すべてのコンピュータの基礎。ゲーム理論は経済学、AI、進化生物学、核戦略で広く使用。',
                    controversies: 'マンハッタン計画に参加し原子爆弾開発に貢献したことは倫理的議論を呼ぶ。ノイマン型アーキテクチャの優先権にも議論がある。',
                    connection: 'ヒルベルトの公理主義を継承。チューリング、シャノン、ナッシュに影響。現代計算機科学、ゲーム理論、量子情報の基礎。',
                    applications: ['コンピュータアーキテクチャ', 'ゲーム理論', '経済学', '量子計算', 'AI戦略'],
                    diagramType: 'von_neumann_architecture',
                    diagramContent: null
                },
                {
                    id: 'wiles',
                    name: 'アンドリュー・ワイルズ（Wiles）',
                    title: 'フェルマーの最終定理の証明者',
                    years: '1953年 -',
                    question: 'フェルマーの最終定理は証明できるか？',
                    answer: '楕円曲線とモジュラー形式を結びつけることで証明できる。',
                    detail: 'ワイルズはイギリスの数学者で、358年間未解決だったフェルマーの最終定理を証明した。10歳でこの定理を知り数学者を志す。7年間ひそかに証明に取り組み、1993年に発表したが、ギャップが発見され1年かけて修正し1995年に完全な証明を発表。谷山・志村予想（楕円曲線とモジュラー形式の対応）の特殊ケースを証明することで、フェルマーの最終定理を導いた。代数幾何学、ガロア表現、岩澤理論など20世紀数学の最先端技術を総動員。2016年アーベル賞受賞。',
                    achievements: 'フェルマーの最終定理の証明（x^n + y^n = z^n は n≥3 で整数解なし）、谷山・志村予想の部分証明',
                    modernSignificance: '証明の過程で発展した技術（モジュラー形式、ガロア表現）は現代整数論の中心的手法。楕円曲線暗号にも応用。',
                    controversies: '最初の証明発表後にギャップが発見され1年間の修正期間が必要。この過程は数学の厳密性の重要性を示した。',
                    connection: 'フェルマー、谷山、志村、グロタンディークの業績を統合。現代整数論の頂点。',
                    applications: ['整数論', '楕円曲線暗号', '代数幾何学'],
                    diagramType: 'elliptic_curve',
                    diagramContent: null
                },
                {
                    id: 'tao',
                    name: 'テレンス・タオ（Terence Tao）',
                    title: '現代の万能数学者',
                    years: '1975年 -',
                    question: '現代数学の最前線で何が起きているか？',
                    answer: '調和解析、偏微分方程式、組合せ論、すべてが相互に結びついている。',
                    detail: 'タオはオーストラリア生まれの中国系数学者で「数学のモーツァルト」と称される。2歳で数学の才能を示し、13歳で国際数学オリンピック金メダル（史上最年少）、21歳でUCLA准教授、24歳で正教授。2006年に31歳でフィールズ賞。調和解析、偏微分方程式、組合せ論、整数論、圧縮センシングなど極めて広範な分野で一流の業績。ベン・グリーンとの共同研究で、素数には任意の長さの等差数列が存在することを証明（グリーン・タオの定理）。ブログで数学を解説し教育にも熱心。',
                    achievements: 'グリーン・タオの定理（素数に任意長の等差数列が存在）、圧縮センシング理論、非線形分散型方程式の研究',
                    modernSignificance: '圧縮センシングはMRI高速化、画像圧縮で実用化。数学ブログやオンライン協力で数学のオープン化を推進。',
                    controversies: '特になし。広く尊敬されている。',
                    connection: '調和解析、整数論の伝統を継承。現代数学の多様な分野を結びつける。',
                    applications: ['MRI高速化', '画像圧縮', '信号処理', 'データサイエンス'],
                    diagramType: 'compressed_sensing',
                    diagramContent: null
                },
                {
                    id: 'grothendieck',
                    name: 'アレクサンドル・グロタンディーク（Grothendieck）',
                    title: '代数幾何学の革命家',
                    years: '1928年 - 2014年',
                    question: '代数幾何学をどう抽象化し一般化するか？',
                    answer: 'スキーム理論とトポスという概念で、幾何学を完全に書き換える。',
                    detail: 'アレクサンドル・グロタンディークはドイツ生まれのフランスの数学者で、20世紀後半の数学に最も大きな影響を与えた一人。代数幾何学を完全に書き換え、スキーム理論、圏論的手法、コホモロジー理論などを導入。彼の抽象的・概念的アプローチは数学の景色を一変させた。1966年にフィールズ賞受賞（授賞式不出席）。1970年代に数学界から引退し環境運動に専念後、隠遁生活。著作『EGA』（代数幾何学の基礎）と『SGA』（代数幾何学セミナー）は現代代数幾何学の聖典。スキーム理論で代数多様体を一般化し、トポス理論で集合論を一般化、代数的K理論、エタールコホモロジー（ヴェイユ予想の解決に貢献）など画期的な理論を構築。',
                    achievements: 'スキーム理論、トポス理論、エタールコホモロジー、代数的K理論、モチーフ理論、ガロア圏',
                    modernSignificance: 'グロタンディークの理論はフェルマーの最終定理の証明、ラングランズ・プログラム、代数的K理論など現代整数論・代数幾何学の基礎。楕円曲線暗号の理論的基盤。',
                    controversies: '極端な完璧主義と抽象性により著作は難解。後年の隠遁生活と数学界との断絶も議論を呼んだ。',
                    connection: 'ブルバキ学派の影響。セール、ドリーニュ、ファルティングス、ワイルズに影響。現代代数幾何学の源流。',
                    applications: ['暗号理論（楕円曲線暗号）', '整数論', '代数幾何学', '圏論'],
                    diagramType: 'scheme_theory',
                    diagramContent: null
                },
                {
                    id: 'mochizuki',
                    name: '望月新一（Mochizuki）',
                    title: 'ABC予想への挑戦者',
                    years: '1969年 -',
                    question: 'ABC予想は証明できるか？',
                    answer: '宇宙際タイヒミュラー理論という新しい枠組みで証明を試みた。',
                    detail: '望月新一は日本の数学者で、京都大学数理解析研究所教授。プリンストン大学でファルティングスに師事し23歳で博士号取得、32歳で京都大学教授。遠アーベル幾何学という新分野を開拓し、p進タイヒミュラー理論を発展。2012年に500ページ以上の論文4本でABC予想の証明を主張する「宇宙際タイヒミュラー理論（IUT理論）」を発表。この理論は既存数学の枠組みを超えた極めて独創的なもので、理解に膨大な時間がかかるため数学界で論争が続く。2021年に論文が掲載されたが、一部の数学者（ショルツ、シュティックス）は証明の妥当性に疑問を呈している。もしABC予想が証明されれば、フェルマーの最終定理など多くの重要結果が簡単に導かれる。',
                    achievements: 'ABC予想の証明の主張、宇宙際タイヒミュラー理論（IUT理論）、遠アーベル幾何学、p進タイヒミュラー理論',
                    modernSignificance: 'もしABC予想の証明が確認されれば数論に革命。IUT理論は数学の新パラダイムとなる可能性。遠アーベル幾何学は代数幾何学の新分野を開拓。',
                    controversies: 'IUT理論の妥当性については数学界で意見が分かれる。ショルツとシュティックスがギャップを指摘し、望月が反論。証明検証には何年もかかる見込み。',
                    connection: 'グロタンディーク、ファルティングスの代数幾何学を基礎。現代整数論の最前線。',
                    applications: ['整数論', '代数幾何学', '暗号理論（潜在的）'],
                    diagramType: 'abc_conjecture',
                    diagramContent: null
                }
            ],
            chaos: [
                {
                    id: 'mandelbrot',
                    name: 'ブノワ・マンデルブロ',
                    title: 'フラクタル幾何学の父',
                    question: '複雑な自然の形をどう数学的に捉えるか？',
                    answer: 'フラクタルだ。自己相似的な無限の複雑さ。',
                    detail: 'ブノワ・マンデルブロはポーランド生まれのフランス系アメリカ人数学者で、フラクタル幾何学の創始者である。1975年にフラクタル（fractal）という言葉を造語し、海岸線、雲、山、木の枝、血管、肺など、従来のユークリッド幾何学では記述できない自然界の複雑な形を数学的に扱う新しい幾何学を確立した。マンデルブロ集合という複素平面上の図形は、無限の複雑さと美しさを持ち、コンピュータグラフィックスで視覚化されると芸術作品のようである。この集合は z_{n+1} = z_n² + c （z_0 = 0）という単純な漸化式で定義されるが、境界は信じられないほど複雑で、どの倍率で拡大しても新しい構造が現れる自己相似性を持つ。フラクタル次元という概念を導入し、図形の「粗さ」や「複雑さ」を非整数の次元で定量化した。例えば、海岸線の次元は1と2の間の値（約1.25）を取る。海岸線のパラドックス（測定する定規を細かくすると、海岸線の長さは無限大に発散する）を数学的に説明した。フラクタルは自然界の様々な現象（地形、気象パターン、株価変動、生体組織）に現れることが分かり、画像圧縮、アンテナ設計、金融市場分析、医療画像解析など、多様な分野で応用されている。',
                    connection: 'カオス理論、計算機グラフィックスに影響。',
                    diagramType: 'fractal',
                    diagramContent: null
                },
                {
                    id: 'perelman',
                    name: 'グリゴリー・ペレルマン',
                    title: 'ポアンカレ予想の解決者',
                    question: 'すべての単連結な3次元閉多様体は3次元球面か？',
                    answer: 'はい。リッチフローで証明できる。',
                    detail: 'グリゴリー・ペレルマンはロシアの数学者で、100年以上未解決だったポアンカレ予想を解決した。1904年にアンリ・ポアンカレが提起したこの予想は、「単連結な3次元閉多様体は3次元球面と同相である」という命題で、トポロジーの中心的問題であり、クレイ数学研究所のミレニアム懸賞問題の一つだった。ペレルマンは2002-2003年にarXiv（プレプリントサーバー）に3本の論文を投稿し、リチャード・ハミルトンが導入したリッチフローという微分幾何学的手法を用いて証明を完成させた。リッチフローは、多様体の計量を時間発展させて滑らかにする手法で、∂g/∂t = -2Ric(g) という偏微分方程式で定義される。ペレルマンはリッチフローの特異点を詳細に解析し、手術理論（surgery theory）を用いて特異点を除去する方法を開発した。この証明はさらに一般的なサーストンの幾何化予想も解決し、すべての3次元多様体が幾何構造を持つ8つの標準形に分解できることを示した。2006年にフィールズ賞を授与されたが辞退し、2010年にはミレニアム懸賞金100万ドルも辞退した。「私の貢献は他の人と同等以上だ」「数学界の倫理基準に失望した」と述べ、その後数学界から姿を消し、サンクトペテルブルクで母と隠遁生活を送っていると言われる。',
                    connection: '幾何化予想の証明。現代トポロジーの頂点。',
                    diagramType: 'topology',
                    diagramContent: null
                }
            ]
        };
        
        const DiagramBuilder = ({ type, content }) => {
            if (type === 'pythagorean') {
                return (
                    <div className="flex flex-col items-center p-4">
                        <div className="relative mb-4">
                            <svg width="120" height="120" viewBox="0 0 120 120">
                                <polygon points="10,110 110,110 60,10" stroke="#3b82f6" strokeWidth="2" fill="none" />
                                <line x1="60" y1="110" x2="60" y2="10" stroke="#fbbf24" strokeWidth="1" strokeDasharray="3,3" />
                            </svg>
                        </div>
                        <KatexFormula formula="a^2 + b^2 = c^2" className="text-blue-400" />
                    </div>
                );
            }
            
            if (type === 'calculus') {
                return (
                    <div className="flex flex-col items-center gap-3 p-4">
                        <KatexFormula formula="\int f(x)\,dx" className="text-xl font-bold text-blue-400" />
                        <KatexFormula formula="\frac{d}{dx} f(x)" className="text-xl font-bold text-green-400" />
                        <div className="text-xs text-gray-400">積分と微分</div>
                    </div>
                );
            }
            
            if (type === 'euler_identity') {
                return (
                    <div className="flex flex-col items-center p-4">
                        <KatexFormula formula="e^{i\pi} + 1 = 0" className="text-2xl font-bold text-purple-400 mb-2" />
                        <div className="text-xs text-gray-400">最も美しい数式</div>
                    </div>
                );
            }
            
            if (type === 'infinity_levels') {
                return (
                    <div className="flex flex-col items-center gap-2 p-4">
                        <div className="flex items-center gap-2">
                            <KatexFormula formula="\aleph_0" className="text-lg text-blue-400" displayMode={false} />
                            <span className="text-gray-400">(可算無限)</span>
                        </div>
                        <div className="text-2xl">↓</div>
                        <div className="flex items-center gap-2">
                            <KatexFormula formula="\aleph_1" className="text-lg text-red-400" displayMode={false} />
                            <span className="text-gray-400">(連続体)</span>
                        </div>
                        <div className="text-xs text-gray-400 mt-2">無限の階層</div>
                    </div>
                );
            }
            
            if (type === 'incompleteness') {
                return (
                    <div className="flex flex-col items-center p-4">
                        <div className="text-4xl mb-2">🚫</div>
                        <div className="text-sm text-red-400 text-center">この命題は証明できない</div>
                        <div className="text-xs text-gray-400 mt-2">(が、真である)</div>
                    </div>
                );
            }
            
            if (type === 'fractal') {
                return (
                    <div className="flex flex-col items-center p-4">
                        <div className="text-4xl mb-2">🌿</div>
                        <div className="text-lg font-bold text-green-400">フラクタル</div>
                        <div className="text-xs text-gray-400 mt-2">自己相似的な無限の複雑さ</div>
                    </div>
                );
            }
            
            if (type === 'topology') {
                return (
                    <div className="flex flex-col items-center p-4">
                        <div className="flex gap-4 items-center">
                            <div className="w-16 h-16 rounded-full border-4 border-blue-500"></div>
                            <div className="text-2xl">=</div>
                            <div className="w-16 h-16 border-4 border-blue-500"></div>
                        </div>
                        <div className="text-xs text-gray-400 mt-3">トポロジー的に同じ</div>
                    </div>
                );
            }
            
            return <div className="text-gray-500 text-sm p-4 text-center">図解準備中</div>;
        };
        
        const MathematicsApp = () => {
            const [selectedEra, setSelectedEra] = useState('ancient');
            const [selectedMathematician, setSelectedMathematician] = useState(null);
            const [mobileView, setMobileView] = useState('era');
            
            useEffect(() => {
                const mathematicians = MATHEMATICIANS[selectedEra] || [];
                setSelectedMathematician(mathematicians[0] || null);
            }, [selectedEra]);
            
            const mathematicians = MATHEMATICIANS[selectedEra] || [];
            
            const handleEraSelect = (eraId) => {
                setSelectedEra(eraId);
                setMobileView('list');
            };
            
            const handleMathematicianSelect = (mathematician) => {
                setSelectedMathematician(mathematician);
                setMobileView('content');
            };
            
            const handleBack = () => {
                if (mobileView === 'content') {
                    setMobileView('list');
                } else if (mobileView === 'list') {
                    setMobileView('era');
                }
            };
            
            return (
                <div className="min-h-screen bg-black text-white">
                    <header className="border-b border-gray-800 bg-gray-900 p-4 md:p-6">
                        <div className="md:hidden flex items-center justify-between mb-3">
                            {mobileView !== 'era' && (
                                <button
                                    onClick={handleBack}
                                    className="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors"
                                >
                                    <ArrowLeft size={20} />
                                    <span className="text-sm">戻る</span>
                                </button>
                            )}
                            {mobileView === 'era' && (
                                <a
                                    href="index.html"
                                    className="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors"
                                >
                                    <Book size={18} />
                                    <span className="text-sm">簡易版</span>
                                </a>
                            )}
                            <a
                                href="../index.html"
                                className="flex items-center gap-2 text-gray-400 hover:text-gray-200 transition-colors ml-auto"
                            >
                                <Home size={18} />
                                <span className="text-sm">ホーム</span>
                            </a>
                        </div>
                        <div className="hidden md:flex justify-between items-center">
                            <div className="flex-1">
                                <a
                                    href="index.html"
                                    className="flex items-center gap-2 text-blue-400 hover:text-blue-300 transition-colors"
                                >
                                    <Book size={20} />
                                    <span className="text-sm">📖 簡易版を見る</span>
                                </a>
                            </div>
                            <div className="flex-1 text-center">
                                <h1 className="text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-400 to-cyan-500 bg-clip-text text-transparent">
                                    数学詳細図鑑
                                </h1>
                                <p className="text-gray-400 text-xs md:text-sm mt-2">Mathematics Deep Dive</p>
                            </div>
                            <div className="flex-1 flex justify-end">
                                <a
                                    href="../index.html"
                                    className="flex items-center gap-2 text-gray-400 hover:text-gray-200 transition-colors"
                                >
                                    <Home size={20} />
                                    <span className="text-sm">ホーム</span>
                                </a>
                            </div>
                        </div>
                        <div className="md:hidden text-center">
                            <h1 className="text-2xl font-bold bg-gradient-to-r from-blue-400 to-cyan-500 bg-clip-text text-transparent">
                                数学詳細図鑑
                            </h1>
                            <p className="text-gray-400 text-xs mt-2">Mathematics Deep Dive</p>
                        </div>
                    </header>
                    
                    <div className="hidden md:flex h-[calc(100vh-120px)]">
                        <div className="w-64 bg-gray-900 border-r border-gray-800 overflow-y-auto p-4">
                            {ERAS.map((era) => (
                                <div
                                    key={era.id}
                                    className={`flex items-start gap-3 p-4 mb-2 rounded-lg cursor-pointer transition-all ${
                                        selectedEra === era.id
                                            ? 'bg-blue-900 border border-blue-600 shadow-lg shadow-blue-500/30'
                                            : 'bg-gray-800 hover:bg-gray-700'
                                    }`}
                                    onClick={() => setSelectedEra(era.id)}
                                >
                                    <div className="mt-1">{era.icon}</div>
                                    <div className="flex-1">
                                        <div className="text-sm font-semibold">{era.title}</div>
                                        <div className="text-xs text-gray-400 mt-1">{era.period}</div>
                                    </div>
                                </div>
                            ))}
                        </div>
                        
                        <div className="w-64 bg-gray-950 border-r border-gray-800 overflow-y-auto p-4">
                            <h2 className="text-base font-semibold text-gray-300 mb-4">数学者一覧</h2>
                            {mathematicians.map((m) => (
                                <div
                                    key={m.id}
                                    className={`p-3 mb-2 rounded-lg cursor-pointer transition-all ${
                                        selectedMathematician?.id === m.id
                                            ? 'bg-blue-900/50 border border-blue-600'
                                            : 'bg-gray-800 hover:bg-gray-700'
                                    }`}
                                    onClick={() => setSelectedMathematician(m)}
                                >
                                    <div className="font-semibold text-sm">{m.name}</div>
                                    <div className="text-xs text-gray-400 mt-1">{m.title}</div>
                                </div>
                            ))}
                        </div>
                        
                        <div className="flex-1 bg-gray-900 overflow-y-auto p-6">
                            {selectedMathematician && (
                                <div className="max-w-3xl mx-auto">
                                    <div className="bg-gray-800 border border-gray-700 rounded-xl p-8">
                                        <div className="mb-8">
                                            <h2 className="text-3xl font-bold text-blue-400 mb-3">{selectedMathematician.name}</h2>
                                            <p className="text-gray-400 text-lg">{selectedMathematician.title}</p>
                                        </div>
                                        
                                        <div className="space-y-6">
                                            <div>
                                                <h3 className="text-base font-semibold mb-2 flex items-center gap-2 text-yellow-500">
                                                    ❓ 問い
                                                </h3>
                                                <p className="text-gray-300">{selectedMathematician.question}</p>
                                            </div>
                                            
                                            <div>
                                                <h3 className="text-base font-semibold mb-2 flex items-center gap-2 text-green-500">
                                                    💡 答え
                                                </h3>
                                                <p className="text-white font-semibold">{selectedMathematician.answer}</p>
                                            </div>
                                            
                                            <div>
                                                <h3 className="text-base font-semibold mb-2 flex items-center gap-2 text-purple-400">
                                                    📖 詳細
                                                </h3>
                                                <p className="text-gray-300 leading-relaxed">{selectedMathematician.detail}</p>
                                            </div>
                                            
                                            <div>
                                                <h3 className="text-base font-semibold mb-2 flex items-center gap-2 text-blue-400">
                                                    🔗 系譜
                                                </h3>
                                                <p className="text-gray-400">{selectedMathematician.connection}</p>
                                            </div>
                                            
                                            <div>
                                                <h3 className="text-base font-semibold mb-2 flex items-center gap-2 text-gray-400">
                                                    📊 図解
                                                </h3>
                                                <div className="bg-gray-900 border border-gray-700 rounded-lg p-6 min-h-64 flex items-center justify-center">
                                                    <DiagramBuilder type={selectedMathematician.diagramType} content={selectedMathematician.diagramContent} />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                    
                    <div className="md:hidden">
                        {mobileView === 'era' && (
                            <div className="min-h-[calc(100vh-140px)] bg-gray-950 p-4">
                                <h2 className="text-lg font-semibold text-gray-300 mb-4">時代区分</h2>
                                {ERAS.map((era) => (
                                    <div
                                        key={era.id}
                                        className="flex items-start gap-3 p-4 mb-3 rounded-lg cursor-pointer transition-all bg-gray-800 active:bg-gray-700"
                                        onClick={() => handleEraSelect(era.id)}
                                    >
                                        <div className="mt-1">{era.icon}</div>
                                        <div className="flex-1">
                                            <div className="text-sm font-semibold">{era.title}</div>
                                            <div className="text-xs text-gray-400 mt-1">{era.period}</div>
                                        </div>
                                        <div className="mt-1">
                                            <ArrowRight size={18} />
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {mobileView === 'list' && (
                            <div className="min-h-[calc(100vh-140px)] bg-gray-950 p-4">
                                <h2 className="text-lg font-semibold text-gray-300 mb-4">数学者一覧</h2>
                                {mathematicians.map((m) => (
                                    <div
                                        key={m.id}
                                        className={`p-4 mb-3 rounded-lg cursor-pointer transition-all ${
                                            selectedMathematician?.id === m.id
                                                ? 'bg-blue-900/50 border border-blue-600'
                                                : 'bg-gray-800 active:bg-gray-700'
                                        }`}
                                        onClick={() => handleMathematicianSelect(m)}
                                    >
                                        <div className="flex items-center justify-between">
                                            <div className="flex-1">
                                                <div className="font-semibold text-sm">{m.name}</div>
                                                <div className="text-xs text-gray-400 mt-1">{m.title}</div>
                                            </div>
                                            <ArrowRight size={18} />
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                        
                        {mobileView === 'content' && selectedMathematician && (
                            <div className="min-h-[calc(100vh-140px)] bg-gray-900 overflow-y-auto p-4">
                                <div className="bg-gray-800 border border-gray-700 rounded-xl p-6">
                                    <div className="mb-6">
                                        <h2 className="text-2xl font-bold text-blue-400 mb-2">{selectedMathematician.name}</h2>
                                        <p className="text-gray-400 text-base">{selectedMathematician.title}</p>
                                    </div>
                                    
                                    <div className="mb-5">
                                        <h3 className="text-sm font-semibold mb-2 flex items-center gap-2 text-yellow-500">
                                            ❓ 問い
                                        </h3>
                                        <p className="text-gray-300 text-sm">{selectedMathematician.question}</p>
                                    </div>
                                    
                                    <div className="mb-5">
                                        <h3 className="text-sm font-semibold mb-2 flex items-center gap-2 text-green-500">
                                            💡 答え
                                        </h3>
                                        <p className="text-white font-semibold text-sm">{selectedMathematician.answer}</p>
                                    </div>
                                    
                                    <div className="mb-5">
                                        <h3 className="text-sm font-semibold mb-2 flex items-center gap-2 text-purple-400">
                                            📖 詳細
                                        </h3>
                                        <p className="text-gray-300 text-sm leading-relaxed">{selectedMathematician.detail}</p>
                                    </div>
                                    
                                    <div className="mb-5">
                                        <h3 className="text-sm font-semibold mb-2 flex items-center gap-2 text-blue-400">
                                            🔗 系譜
                                        </h3>
                                        <p className="text-gray-400 text-sm">{selectedMathematician.connection}</p>
                                    </div>
                                    
                                    <div>
                                        <h3 className="text-sm font-semibold mb-2 flex items-center gap-2 text-gray-400">
                                            📊 図解
                                        </h3>
                                        <div className="bg-gray-900 border border-gray-700 rounded-lg p-4 min-h-48 flex items-center justify-center">
                                            <DiagramBuilder type={selectedMathematician.diagramType} content={selectedMathematician.diagramContent} />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<MathematicsApp />);
    </script>
</body>
</html>
